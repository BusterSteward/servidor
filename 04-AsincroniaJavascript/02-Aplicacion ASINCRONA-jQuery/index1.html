<!DOCTYPE html>
<html lang="es">
<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
		<meta http-equiv="Pragma" content="no-cache">
		 
		<meta name="description" content="Estudio Ajax JavaScript">
		<meta name="author" content="Jorge López">

		<link rel="shortcut icon" href="imagenes/icon.png"/>

		<title>Ajax</title>

		<!-- estilo general de la página -->
		<link href="ficheros/estilo_pagina.css" rel="stylesheet">
		
		<!-- estilo barra de menú -->
		<link href="ficheros/barra_menu.css" rel="stylesheet">		
		
		<!-- biblioteca de iconos -->
		<link href="ficheros/all.css" rel="stylesheet">
		
		<!-- librería jQuery -->
		<script type="text/javascript" src="ficheros/jquery.js"></script>
</head>


<script type="text/javascript">
	/************************************************
	 ************************************************/
function llamo_a_script2(numero)
{
	document.getElementById('estrella'+numero).style.visibility='visible';
	document.getElementById("aviso"+numero).innerHTML="";
	document.getElementById("b"+numero).disabled=true;
	
	// AJAX jQuery
	// con la llamada al script php mediante AJAX jQuery 
	// pasamos un valor al script PHP -> en servidor recuperamos valor con $_post
	// defino el callback() que se ejcutará cuando el script PHP termine su ejecución
	$.post("prueba"+numero+".php?valor2=999",{"VALOR":numero},function(datos)
		{
			oculto_estrella(numero);
			$("#b"+numero).attr("disabled",false);

			document.getElementById("aviso"+numero).innerHTML=datos;
		});	
		
	// IMPORTANTE
	// OJO!!!!
	// si aquí hubiese MÁS código que ejecutar
	// se seguiría ejecutando independientemente de si el script PHP se ha ejecutado o no
	// OJO!!!!		
	// IMPORTANTE
}
//se llama a esta funcion al pulsar un boton
function llamo_a_script(numero)
{
	document.getElementById('estrella'+numero).style.visibility='visible';
	document.getElementById("aviso"+numero).innerHTML="";
	document.getElementById("b"+numero).disabled=true;
	
	// AJAX jQuery
	// con la llamada al script php mediante AJAX jQuery 
	// pasamos un valor al script PHP -> en servidor recuperamos valor con $_post
	// defino el callback() que se ejcutará cuando el script PHP termine su ejecución
	$("#aviso"+numero).load("prueba"+numero+".php?valor2=999",{"VALOR":numero},function()
		{
			oculto_estrella(numero);
			$("#b"+numero).attr("disabled",false);
		});	
		
	// IMPORTANTE
	// OJO!!!!
	// si aquí hubiese MÁS código que ejecutar
	// se seguiría ejecutando independientemente de si el script PHP se ha ejecutado o no
	// OJO!!!!		
	// IMPORTANTE
}

function oculto_estrella(numero)
{
	//document.getElementById('estrella'+numero).style.visibility='hidden';
	$("#estrella"+numero).css("visibility","hidden");
}


</script>

<body onload="">
<!-- **************************** CABECERA ************************************************ -->
<!-- **************************** CABECERA ************************************************ -->
<!-- **************************** CABECERA ************************************************ -->
<header>

<div class="BarraNavegar">
				<i class="fas fa-tv fa-2x" ></i>
				<label  class="L1">Servidor 2º DAW&nbsp&nbsp&nbsp</label>		
				<label  class="L2">Ejemplo de Aplicación:</label>		
				<label  class="L3"><b>ASÍNCRONA</b> jQuery API</label>	
</div>
</header>
<!-- **************************** CUERPO ************************************************ -->
<!-- **************************** CUERPO ************************************************ -->
<!-- **************************** CUERPO ************************************************ -->
<div class="contenedor1">
<div id="cajapagina" class="contenedor2">

		<div id="" class="contenedor3">
				<div id="aviso1" name="aviso1"  scrolling ="no" marginheight="10" marginwidth="1" 
					style="border: 1px solid red; width:140px; height:120px;">
				</div>	
				<div>
					<img  id="cajafoto1" src="imagenes/muneco.gif"  height="45" width="40" style="visibility:visible;"/>
					<img  id="estrella1" src="imagenes/estrella.gif"  height="40" width="40" style="visibility:hidden;border: 1px solid black"/>
				</div>				
				<input class="botones" type = "button" id="b1" value = "Llamo a script-1 PHP" style="cursor:pointer;" onclick = "llamo_a_script2('1')">
		</div>		

		<div id="" class="contenedor3">
				<div id="aviso2" name="aviso2"  scrolling ="no" marginheight="10" marginwidth="1" 
					style="border: 1px solid red; width:140px; height:120px;">
				</div>			
				<div>
					<img  id="cajafoto2" src="imagenes/muneco.gif"  height="45" width="40" style="visibility:visible;"/>
					<img  id="estrella2" src="imagenes/estrella.gif"  height="40" width="40" style="visibility:hidden;border: 1px solid black"/>
				</div>				
				<input class="botones" type = "button" id="b2" value = "Llamo a script-2 PHP" style="cursor:pointer;" onclick = "llamo_a_script('2')">
		</div>		
		
		<div id="" class="contenedor3">
				<div id="aviso3" name="aviso3"  scrolling ="no" marginheight="10" marginwidth="1" 
					style="border: 1px solid red; width:140px; height:120px;">
				</div>			
				<div>
					<img  id="cajafoto3" src="imagenes/muneco.gif"  height="45" width="40" style="visibility:visible;"/>
					<img  id="estrella3" src="imagenes/estrella.gif"  height="40" width="40" style="visibility:hidden;border: 1px solid black"/>
				</div>				
				<input class="botones" type = "button" id="b3" value = "Llamo a script-3 PHP" style="cursor:pointer;" onclick = "llamo_a_script('3')">
		</div>		
</div>

</div>
<!-- **************************** FOOTER ************************************************ -->
<!-- **************************** FOOTER ************************************************ -->
<!-- **************************** FOOTER ************************************************ -->
<footer class="footer">
		<img  id="estrella" src="imagenes/estrella.gif"  height="40" width="40" style="visibility:hidden;"/>
		&nbsp&nbsp<i class="fas fa-building fa-2x" ></i>
		<label>&nbsp © 2022 IES Escultor</label>		
</footer>

</body>
</html>