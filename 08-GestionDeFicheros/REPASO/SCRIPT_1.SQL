-- Comprobamos si existe el esquema "ESQUEMA_PRUEBA"
-- Si no existe lo creamos

CREATE DATABASE  IF NOT EXISTS ESQUEMA_PRUEBA1; 
USE ESQUEMA_PRUEBA1; 

-- Si existe alguna de esta tabla la borramos

DROP TABLE IF EXISTS EMPLEADOS;
DROP TABLE IF EXISTS DEPARTAMENTOS;
DROP TABLE IF EXISTS PERTENENCIA;

-- Creamos las tablas

-- En la tabla EMPLEADOS hemos puesto una restricción CHECK
-- No da un error de sintaxis
-- Pero no funciona porque MySQL ignora las restricciones CHECK

CREATE TABLE EMPLEADOS
(
CODE 			VARCHAR(4) 		NOT NULL,
NOMBRE 	VARCHAR(10) 		NOT NULL,
EDAD			INT						NOT NULL,
PRIMARY KEY (CODE),
CHECK (EDAD> 0) 
);

-- En la tabla DEPARTAMENTOS hemos puesto una restricción UNIQUE
CREATE TABLE DEPARTAMENTOS
(
CODD				VARCHAR(4)		NOT NULL,
NOMBRED		VARCHAR(12)		NOT NULL,
PRIMARY KEY (CODD),
UNIQUE (NOMBRED)
);

CREATE TABLE PERTENENCIA
(
ID				INT					NOT NULL AUTO_INCREMENT,
CODE		VARCHAR(4)	NOT NULL,
CODD		VARCHAR(4)	NOT NULL,
PRIMARY KEY (ID)
-- la clave primaria es un campo auto-numérico al que no hay que asignarle valor
-- el valor se lo pone el propio SGBD
);

-- Introducimos datos de prueba en las tablas
INSERT INTO EMPLEADOS VALUES('E01', 'PEPE',45);
INSERT INTO EMPLEADOS VALUES('E02', 'LUIS',24);
INSERT INTO EMPLEADOS VALUES('E03', 'MARIA',56);
INSERT INTO EMPLEADOS VALUES('E04', 'MARTA',19);
INSERT INTO EMPLEADOS VALUES('E05', 'ALFONSO',49);
INSERT INTO EMPLEADOS VALUES('E06', 'ESTHER',34);
INSERT INTO EMPLEADOS VALUES('E07', 'PEDRO',45);
INSERT INTO EMPLEADOS VALUES('E08', 'PABLO',65);
INSERT INTO EMPLEADOS VALUES('E09', 'ELENA',56);
INSERT INTO EMPLEADOS VALUES('E10', 'ISABEL',14);
INSERT INTO EMPLEADOS VALUES('E11', 'RAMÓN',27);
INSERT INTO EMPLEADOS VALUES('E12', 'JAVIER',30);

INSERT INTO DEPARTAMENTOS VALUES('D01', 'CONTABILIDAD');
INSERT INTO DEPARTAMENTOS VALUES('D02', 'DISEÑO');
INSERT INTO DEPARTAMENTOS VALUES('D03', 'PUBLICIDAD');
INSERT INTO DEPARTAMENTOS VALUES('D04', 'ALMACÉN');
INSERT INTO DEPARTAMENTOS VALUES('D05', 'VENTAS');
INSERT INTO DEPARTAMENTOS VALUES('D06', 'TRANSPORTE');
INSERT INTO DEPARTAMENTOS VALUES('D07', 'EXPORTACIÓN');

INSERT INTO PERTENENCIA VALUES(1,'E01', 'D01');
INSERT INTO PERTENENCIA VALUES(2,'E02', 'D02');
INSERT INTO PERTENENCIA VALUES(3,'E03', 'D02');
INSERT INTO PERTENENCIA VALUES(4,'E04', 'D04');
INSERT INTO PERTENENCIA VALUES(5,'E02', 'D03');
INSERT INTO PERTENENCIA VALUES(6,'E02', 'D05');
INSERT INTO PERTENENCIA VALUES(7,'E05', 'D01');
INSERT INTO PERTENENCIA VALUES(8,'E05', 'D02');
INSERT INTO PERTENENCIA VALUES(9,'E05', 'D03');
INSERT INTO PERTENENCIA VALUES(10,'E06', 'D03');
INSERT INTO PERTENENCIA VALUES(11,'E06', 'D04');
INSERT INTO PERTENENCIA VALUES(12,'E06', 'D05');

